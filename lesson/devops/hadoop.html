<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hadoop Virtual Cluster Installation &#8212; Big Data Classes</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'Draft',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Ubuntu Juju" href="juju.html" />
    <link rel="prev" title="Dynamic deployment of arbitrary X software on VC (under preparation)" href="deployment.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          classes</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../i523/2017/index.html">i523</a></li>
                <li><a href="../index.html">Lessons</a></li>
                <li><a href="../../changelog.html">Changes</a></li>
                <li><a href="https://github.com/cloudmesh/classes">Fork</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2017/index.html">I523 Big Data Applications and Analytics (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#content">Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#additional-content">Additional Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2016/index.html">I523 Big Data Applications and Analytics (2016)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/course.html">Syllabus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/assignments/assignments.html">Homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/gitlab.html">Gitlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_big_data.html">Python for Big Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_lesson1.html">Python Fingerprint Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/linux.html">Linux Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/latex.html">4.2. LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ubuntu.html">Ubuntu Development Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ssh.html">Using SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/n-resources.html">Homework References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/contributing.html">2.3. Contributing</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../i524/2017/index.html">I524 Big Data and Open Source Software Projects (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/preface/index.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/overview.html">i524 Big Data and Open Source Software Projects (2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/calendar.html">I524 Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/lectures.html">I524 Lectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/assignments.html">I524 Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/hids-techs.html">HID Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/technologies.html">Technologies</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-prerequisites-for-this-class">What are the prerequisites for this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-full-time-student-at-iupui-can-i-take-the-online-version">I am full time student at IUPUI. Can I take the online version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-a-residential-student-at-iu-can-i-take-the-online-version-only">I am a residential student at IU. Can I take the online version only?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#the-class-is-full-what-do-i-do">The class is full what do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-buy-a-textbook">Do I need to buy a textbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-a-computer-to-participate-in-this-class">Do I need a computer to participate in this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#where-is-the-official-iu-calendar-for-the-fall">Where is the official IU calendar for the Fall?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-do-i-ask-a-question">How do I ask a question?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#why-are-you-using-github-for-submitting-projects-and-papers">Why are you using github for submitting projects and papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-write-a-research-article-on-computer-science">How to write a research article on computer science?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#which-bibliography-manager-is-required-for-the-class">Which bibliography manager is required for the class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-use-endnote-or-other-bibliography-managers">Can I use endnote or other bibliography managers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#plagiarism-test-and-resources-related-to-that">Plagiarism test and resources related to that</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-many-hours-will-this-course-take-to-work-on-every-week">How many hours will this course take to work on every week?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#is-all-classes-material-final">Is all classes material final?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-changes-to-the-web-page">What are the changes to the web page?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-lectures-should-i-learn-when">What lectures should I learn when?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-you-doing-the-papers">I524: Why are you doing the papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-there-no-homework-to-test-me-on-skills-such-as-ansible-or-python">I524: Why are there no homework to test me on skills such as ansible or python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-not-use-chef-or-another-devops-framework">I524: Why not use chef or another DevOps framework?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-lost">I am lost?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-like-technology-topic-project-etc">I do not like Technology/Topic/Project/etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-not-able-to-attend-the-online-hours">I am not able to attend the online hours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-attend-the-online-sessions">Do I need to attend the online sessions?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-leaning-outcomes">What are the leaning outcomes?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#there-are-so-many-messages-on-piazza-i-can-not-keep-up">There are so many messages on Piazza I can not keep up.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-know-python-what-do-i-do">I do not know python. What do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-solve-merge-conflict-in-pull-request">How to solve merge conflict in Pull Request?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#building-cloudmesh-classes-in-local-machine">Building cloudmesh/classes in local machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rolling-back-uninstall-of-cryptography">Rolling back uninstall of cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-sole-merge-conflict-in-a-pull-request">How to sole Merge Conflict in a Pull Request?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#cheat-sheet-for-linux-commands">Cheat sheet for Linux commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-techlist-1-homework">Tips: TechList.1 homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#citations">Citations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#spelling">Spelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rubric">Rubric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#timeliness">Timeliness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#outdated-tech-ology">Outdated Tech ology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#techlist-1-and-paper-1-pagecount">Techlist 1 and Paper 1 : Pagecount</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-install-virtualbox">Tips to Install Virtualbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-generate-the-ssh-key-on-ubuntu-vm">Do I generate the SSH key on Ubuntu VM ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#ways-to-run-ubuntu-on-windows-10">Ways to run Ubuntu on Windows 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#don-t-use-anaconda">Don’t use Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#using-ssh-key-for-git-push">Using SSH Key for Git Push</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-write-the-papers-on-osx">Can I write the papers on OSX?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-is-the-nature-of-team-collaboration-on-papers">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#id1">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-due-dates-for-assignments">What are the due dates for assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-good-places-to-find-refernce-entries">What are good places to find refernce entries?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-install-matplotlib">How to install Matplotlib?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-test-if-your-os-can-install-cloudmesh-client">How to test if your OS can install cloudmesh_client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#os-x">OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-write-a-good-paper">Tips to write a Good Paper</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cloud/index.html">Cloud (under construction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/index.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/index.html">Writing Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/index.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../org/index.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/index.html">Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/index.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/draft.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iaas/index.html">IaaS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible/index.html">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="chef.html">Chef</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html">Compaprison of Configuration management software</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite_cluster.html">Composite Clusters (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Dynamic deployment of arbitrary X software on VC (under preparation)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Hadoop Virtual Cluster Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="juju.html">Ubuntu Juju</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb_cluster.html">MongoDB Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openmpi_cluster.html">OpenMPI Virtual Cluster (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack_heat.html">OpenStack Heat</a></li>
<li class="toctree-l2"><a class="reference internal" href="other.html">Other (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">DevOps (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_vc.html">Overview Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet.html">Puppet</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack-ex1-output.html">Full Message of <code class="docutils literal"><span class="pre">salt-call</span></code> Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack.html">SaltStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/index.html">Notebooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">Todos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../todo.html#general">General</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#version-unreleased">%%version%% (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id1">3.2.0 (2017-08-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id2">3.1.1 (2017-02-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id7">3.1.0 (2017-02-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id12">3.0.9 (2017-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id17">3.0.8 (2017-01-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id21">3.0.7 (2017-01-20)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id26">3.0.6 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id29">3.0.5 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id34">3.0.4 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id35">3.0.3 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id38">3.0.2 (2017-01-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id39">3.0.1 (2017-01-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id40">3.0 (2017-01-06)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Hadoop Virtual Cluster Installation</a><ul>
<li><a class="reference internal" href="#cloudmesh-cluster-installation">Cloudmesh Cluster Installation</a><ul>
<li><a class="reference internal" href="#create-cluster">Create Cluster</a></li>
<li><a class="reference internal" href="#check-created-cluster">Check Created Cluster</a></li>
<li><a class="reference internal" href="#delete-cluster">Delete Cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hadoop-cluster-installation">Hadoop Cluster Installation</a><ul>
<li><a class="reference internal" href="#create-hadoop-cluster">Create Hadoop Cluster</a></li>
<li><a class="reference internal" href="#delete-hadoop-cluster">Delete Hadoop Cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics-with-hadoop">Advanced Topics with Hadoop</a><ul>
<li><a class="reference internal" href="#hadoop-virtual-cluster-with-spark-and-or-pig">Hadoop Virtual Cluster with Spark and/or Pig</a></li>
<li><a class="reference internal" href="#word-count-example-on-spark">Word Count Example on Spark</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2017/index.html">I523 Big Data Applications and Analytics (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#content">Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#additional-content">Additional Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2016/index.html">I523 Big Data Applications and Analytics (2016)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/course.html">Syllabus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/assignments/assignments.html">Homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/gitlab.html">Gitlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_big_data.html">Python for Big Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_lesson1.html">Python Fingerprint Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/linux.html">Linux Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/latex.html">4.2. LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ubuntu.html">Ubuntu Development Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ssh.html">Using SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/n-resources.html">Homework References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/contributing.html">2.3. Contributing</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../i524/2017/index.html">I524 Big Data and Open Source Software Projects (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/preface/index.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/overview.html">i524 Big Data and Open Source Software Projects (2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/calendar.html">I524 Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/lectures.html">I524 Lectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/assignments.html">I524 Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/hids-techs.html">HID Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/technologies.html">Technologies</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-prerequisites-for-this-class">What are the prerequisites for this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-full-time-student-at-iupui-can-i-take-the-online-version">I am full time student at IUPUI. Can I take the online version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-a-residential-student-at-iu-can-i-take-the-online-version-only">I am a residential student at IU. Can I take the online version only?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#the-class-is-full-what-do-i-do">The class is full what do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-buy-a-textbook">Do I need to buy a textbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-a-computer-to-participate-in-this-class">Do I need a computer to participate in this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#where-is-the-official-iu-calendar-for-the-fall">Where is the official IU calendar for the Fall?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-do-i-ask-a-question">How do I ask a question?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#why-are-you-using-github-for-submitting-projects-and-papers">Why are you using github for submitting projects and papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-write-a-research-article-on-computer-science">How to write a research article on computer science?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#which-bibliography-manager-is-required-for-the-class">Which bibliography manager is required for the class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-use-endnote-or-other-bibliography-managers">Can I use endnote or other bibliography managers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#plagiarism-test-and-resources-related-to-that">Plagiarism test and resources related to that</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-many-hours-will-this-course-take-to-work-on-every-week">How many hours will this course take to work on every week?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#is-all-classes-material-final">Is all classes material final?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-changes-to-the-web-page">What are the changes to the web page?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-lectures-should-i-learn-when">What lectures should I learn when?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-you-doing-the-papers">I524: Why are you doing the papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-there-no-homework-to-test-me-on-skills-such-as-ansible-or-python">I524: Why are there no homework to test me on skills such as ansible or python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-not-use-chef-or-another-devops-framework">I524: Why not use chef or another DevOps framework?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-lost">I am lost?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-like-technology-topic-project-etc">I do not like Technology/Topic/Project/etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-not-able-to-attend-the-online-hours">I am not able to attend the online hours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-attend-the-online-sessions">Do I need to attend the online sessions?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-leaning-outcomes">What are the leaning outcomes?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#there-are-so-many-messages-on-piazza-i-can-not-keep-up">There are so many messages on Piazza I can not keep up.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-know-python-what-do-i-do">I do not know python. What do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-solve-merge-conflict-in-pull-request">How to solve merge conflict in Pull Request?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#building-cloudmesh-classes-in-local-machine">Building cloudmesh/classes in local machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rolling-back-uninstall-of-cryptography">Rolling back uninstall of cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-sole-merge-conflict-in-a-pull-request">How to sole Merge Conflict in a Pull Request?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#cheat-sheet-for-linux-commands">Cheat sheet for Linux commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-techlist-1-homework">Tips: TechList.1 homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#citations">Citations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#spelling">Spelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rubric">Rubric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#timeliness">Timeliness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#outdated-tech-ology">Outdated Tech ology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#techlist-1-and-paper-1-pagecount">Techlist 1 and Paper 1 : Pagecount</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-install-virtualbox">Tips to Install Virtualbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-generate-the-ssh-key-on-ubuntu-vm">Do I generate the SSH key on Ubuntu VM ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#ways-to-run-ubuntu-on-windows-10">Ways to run Ubuntu on Windows 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#don-t-use-anaconda">Don’t use Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#using-ssh-key-for-git-push">Using SSH Key for Git Push</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-write-the-papers-on-osx">Can I write the papers on OSX?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-is-the-nature-of-team-collaboration-on-papers">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#id1">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-due-dates-for-assignments">What are the due dates for assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-good-places-to-find-refernce-entries">What are good places to find refernce entries?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-install-matplotlib">How to install Matplotlib?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-test-if-your-os-can-install-cloudmesh-client">How to test if your OS can install cloudmesh_client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#os-x">OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-write-a-good-paper">Tips to write a Good Paper</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cloud/index.html">Cloud (under construction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/index.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/index.html">Writing Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/index.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../org/index.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/index.html">Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/index.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/draft.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iaas/index.html">IaaS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible/index.html">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="chef.html">Chef</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html">Compaprison of Configuration management software</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite_cluster.html">Composite Clusters (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Dynamic deployment of arbitrary X software on VC (under preparation)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Hadoop Virtual Cluster Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="juju.html">Ubuntu Juju</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb_cluster.html">MongoDB Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openmpi_cluster.html">OpenMPI Virtual Cluster (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack_heat.html">OpenStack Heat</a></li>
<li class="toctree-l2"><a class="reference internal" href="other.html">Other (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">DevOps (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_vc.html">Overview Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet.html">Puppet</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack-ex1-output.html">Full Message of <code class="docutils literal"><span class="pre">salt-call</span></code> Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack.html">SaltStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/index.html">Notebooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">Todos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../todo.html#general">General</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#version-unreleased">%%version%% (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id1">3.2.0 (2017-08-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id2">3.1.1 (2017-02-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id7">3.1.0 (2017-02-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id12">3.0.9 (2017-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id17">3.0.8 (2017-01-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id21">3.0.7 (2017-01-20)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id26">3.0.6 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id29">3.0.5 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id34">3.0.4 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id35">3.0.3 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id38">3.0.2 (2017-01-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id39">3.0.1 (2017-01-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id40">3.0 (2017-01-06)</a></li>
</ul>
</li>
</ul>
</ul>
</li><ul>
<li><a class="reference internal" href="#">Hadoop Virtual Cluster Installation</a><ul>
<li><a class="reference internal" href="#cloudmesh-cluster-installation">Cloudmesh Cluster Installation</a><ul>
<li><a class="reference internal" href="#create-cluster">Create Cluster</a></li>
<li><a class="reference internal" href="#check-created-cluster">Check Created Cluster</a></li>
<li><a class="reference internal" href="#delete-cluster">Delete Cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hadoop-cluster-installation">Hadoop Cluster Installation</a><ul>
<li><a class="reference internal" href="#create-hadoop-cluster">Create Hadoop Cluster</a></li>
<li><a class="reference internal" href="#delete-hadoop-cluster">Delete Hadoop Cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics-with-hadoop">Advanced Topics with Hadoop</a><ul>
<li><a class="reference internal" href="#hadoop-virtual-cluster-with-spark-and-or-pig">Hadoop Virtual Cluster with Spark and/or Pig</a></li>
<li><a class="reference internal" href="#word-count-example-on-spark">Word Count Example on Spark</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p></p>
<hr>
<small>
<b>Web Links</b>
<ul>
    <li><a href="https://cloudmesh.github.io/classes/i523/2017">i523</a> </li>  
    <li><a href="https://cloudmesh.github.io/classes/i524">i524</a> </li>  

  </ul>
</small>

<p></p>
<hr>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="hadoop-virtual-cluster-installation">
<h1>Hadoop Virtual Cluster Installation<a class="headerlink" href="#hadoop-virtual-cluster-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cloudmesh-cluster-installation">
<h2>Cloudmesh Cluster Installation<a class="headerlink" href="#cloudmesh-cluster-installation" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Before you start this lesson, you MUST finish
<a class="reference internal" href="../cloud/cloudmesh-installation.html#cm-install"><span class="std std-ref">Cloudmesh Client on Ubuntu 16.04</span></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This lesson is created and test under the newest version of
Cloudmesh client. Update yours if not.</p>
</div>
<p>To manage virtual cluster on cloud, the command is <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span></code>. Try
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">help</span></code> to see what other commands are and what options they
supported.</p>
<div class="section" id="create-cluster">
<h3>Create Cluster<a class="headerlink" href="#create-cluster" title="Permalink to this headline">¶</a></h3>
<p>To create a virtual cluster on cloud, we must define an active cluster
specification with <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">define</span></code> command.
For example, we define a cluster with 3 nodes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster define --count 3
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>All options will use the default setting if not specified during cluster
define. Try <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">help</span></code> command to see what options
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">define</span></code> has and means, here is part of the usage information:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ cm cluster help
usage:
cluster create [-n NAME] [-c COUNT] [-C CLOUD] [-u NAME] [-i IMAGE]
 [-f FLAVOR] [-k KEY] [-s NAME] [-AI]
Options:
 -A --no-activate               Don&#39;t activate this cluster
 -I --no-floating-ip            Don&#39;t assign floating IPs
 -n NAME --name=NAME            Name of the cluster
 -c COUNT --count=COUNT         Number of nodes in the cluster
 -C NAME --cloud=NAME           Name of the cloud
 -u NAME --username=NAME        Name of the image login user
 -i NAME --image=NAME           Name of the image
 -f NAME --flavor=NAME          Name of the flavor
 -k NAME --key=NAME             Name of the key
 -s NAME --secgroup=NAME        NAME of the security group
 -o PATH --path=PATH            Output to this path
...
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Floating IP is a valuable and limited resource on cloud.
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">define</span></code> will assign floating IP to every node within
the cluster by default.
Cluster creation will fail if the floating IPs run out on cloud.
When you run into error like this, use option <code class="docutils literal"><span class="pre">-I</span></code> or
<code class="docutils literal"><span class="pre">--no-floating-ip</span></code> to avoid assigning floating IPs during cluster
creation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster define --count 3 --no-floating-ip
</pre></div>
</div>
<p class="last">Then manually assign floating IP to one of the nodes. Use this node as
a logging node or head node to log in to all the other nodes.</p>
</div>
<p>We can have multiple specifications defined at the same time. Every time
a new cluster specification is defined, the counter of the default cluster
name will increment. Hence, the default cluster name will be <code class="docutils literal"><span class="pre">cluster-001</span></code>,
<code class="docutils literal"><span class="pre">cluster-002</span></code>, <code class="docutils literal"><span class="pre">cluster-003</span></code> and so on. Use
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">avail</span></code> to check all the available cluster specifications:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster avail
  cluster-001
    count                         : 3
    image                         : CC-Ubuntu14.04
    key                           : xl41
    flavor                        : m1.small
    secgroup                      : default
    assignFloatingIP              : True
    cloud                         : chameleon
&gt; cluster-002
    count                         : 3
    image                         : CC-Ubuntu14.04
    key                           : xl41
    flavor                        : m1.small
    secgroup                      : default
    assignFloatingIP              : False
    cloud                         : chameleon
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">use</span> <span class="pre">[NAME]</span></code>, we are able to switch between different
specifications with given cluster name:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster use cluster-001
$ cm cluster avail
&gt; cluster-001
    count                         : 3
    image                         : CC-Ubuntu14.04
    key                           : xl41
    flavor                        : m1.small
    secgroup                      : default
    assignFloatingIP              : True
    cloud                         : chameleon
  cluster-002
    count                         : 3
    image                         : CC-Ubuntu14.04
    key                           : xl41
    flavor                        : m1.small
    secgroup                      : default
    assignFloatingIP              : False
    cloud                         : chameleon
</pre></div>
</div>
<p>This will activate specification <code class="docutils literal"><span class="pre">cluster-001</span></code> which assigns floating IP
during creation rather than the latest one <code class="docutils literal"><span class="pre">cluster-002</span></code>.</p>
<p>With our cluster specification ready, we create the cluster with command
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">allocate</span></code>. This will create a virtual cluster on the cloud
with the activated specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster allocate
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Each specification can have one active cluster, which means <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span>
<span class="pre">allocate</span></code> does nothing if there is a successfully active cluster.</p>
</div>
</div>
<div class="section" id="check-created-cluster">
<h3>Check Created Cluster<a class="headerlink" href="#check-created-cluster" title="Permalink to this headline">¶</a></h3>
<p>With command <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">list</span></code>, we can see the cluster with the default name
<code class="docutils literal"><span class="pre">cluster-001</span></code> we just created:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster list
cluster-001
</pre></div>
</div>
<p>Using <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">nodes</span> <span class="pre">[NAME]</span></code>, we can also see the nodes of the cluster
along with their assigned floating IPs of the cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster nodes cluster-001
xl41-001 129.114.33.147
xl41-002 129.114.33.148
xl41-003 129.114.33.149
</pre></div>
</div>
<p>If option <code class="docutils literal"><span class="pre">--no-floating-ip</span></code> is included during definition, you will see nodes
without floating IP:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster nodes cluster-002
xl41-004 None
xl41-005 None
xl41-006 None
</pre></div>
</div>
<p>To log in one of them, use command <code class="docutils literal"><span class="pre">cm</span> <span class="pre">vm</span> <span class="pre">assign</span> <span class="pre">IP</span> <span class="pre">[NAME]</span></code> to assign a
floating IP to one of them:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm vm ip assign xl41-006
$ cm cluster nodes cluster-002
xl41-004 None
xl41-005 None
xl41-006 129.114.33.150
</pre></div>
</div>
<p>Then you can log in this node as a head node of your cluster
by <code class="docutils literal"><span class="pre">cm</span> <span class="pre">vm</span> <span class="pre">ssh</span> <span class="pre">[NAME]</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm vm ssh xl41-006
cc@xl41-006 $
</pre></div>
</div>
</div>
<div class="section" id="delete-cluster">
<h3>Delete Cluster<a class="headerlink" href="#delete-cluster" title="Permalink to this headline">¶</a></h3>
<p>Using <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">delete</span> <span class="pre">[NAME]</span></code>, we are able to delete the cluster
we created:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster delete cluster-001
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Option <code class="docutils literal"><span class="pre">--all</span></code> can delete all the clusters created, so be careful:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ cm cluster delete --all
</pre></div>
</div>
</div>
<p>Then we need to undefine our cluster specification with command
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">undefine</span> <span class="pre">[NAME]</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster undefine cluster-001
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Option <code class="docutils literal"><span class="pre">--all</span></code> can delete all the cluster specifications:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ cm cluster undefine --all
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="hadoop-cluster-installation">
<h2>Hadoop Cluster Installation<a class="headerlink" href="#hadoop-cluster-installation" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This section is built upon the previous one. Please finish the previous one
before start this one.</p>
</div>
<div class="section" id="create-hadoop-cluster">
<h3>Create Hadoop Cluster<a class="headerlink" href="#create-hadoop-cluster" title="Permalink to this headline">¶</a></h3>
<p>To create a Hadoop cluster, we need to first define a cluster with
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">define</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster define --count 3
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>To deploy a Hadoop cluster, we only support image <code class="docutils literal"><span class="pre">CC-Ubuntu14.04</span></code>
on Chameleon. DO NOT use <code class="docutils literal"><span class="pre">CC-Ubuntu16.04</span></code> or any other images.
You will need to specify it if it’s not the default image:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ cm cluster define --count 3 --image CC-Ubuntu14.04
</pre></div>
</div>
</div>
<p>Then we define the Hadoop cluster upon the cluster we defined
using <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">define</span></code> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop define
</pre></div>
</div>
<p>Same as <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">define</span></code>, you can define multiple specifications for the
Hadoop cluster and check them with <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">avail</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop avail
&gt; stack-001
  local_path                    : /Users/tony/.cloudmesh/stacks/stack-001
  addons                        : []
</pre></div>
</div>
<p>We can use <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">use</span> <span class="pre">[NAME]</span></code> to activate the specification with the
given name:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop use stack-001
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">May not be available for current version of Cloudmesh Client.</p>
</div>
<p>Before deploy, we need to use <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">sync</span></code> to checkout / synchronize the
Big Data Stack from Github.com:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop sync
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To avoid errors, make sure you are able to connect to Github.com using SSH:
<a class="reference external" href="https://help.github.com/articles/connecting-to-github-with-ssh/">https://help.github.com/articles/connecting-to-github-with-ssh/</a>.</p>
</div>
<p>Finally, we are ready to deploy our Hadoop cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop deploy
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This process could take up to 10 minutes based on your network.</p>
</div>
<p>To check Hadoop is working or not. Use <code class="docutils literal"><span class="pre">cm</span> <span class="pre">vm</span> <span class="pre">ssh</span></code> to log into the
<code class="docutils literal"><span class="pre">Namenode</span></code> of the Hadoop cluster. It’s usually the first node of
the cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm vm ssh node-001
cc@hostname$
</pre></div>
</div>
<p>Switch to user <code class="docutils literal"><span class="pre">hadoop</span></code> and check HDFS is set up or not:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cc@hostname$ sudo su - hadoop
hadoop@hostname$ hdfs dfs -ls /
Found 1 items
drwxrwx---   - hadoop hadoop,hadoopadmin          0 2017-02-15 17:26 /tmp
</pre></div>
</div>
<p>Now the Hadoop cluster is properly installed and configured.</p>
</div>
<div class="section" id="delete-hadoop-cluster">
<h3>Delete Hadoop Cluster<a class="headerlink" href="#delete-hadoop-cluster" title="Permalink to this headline">¶</a></h3>
<p>To delete the Hadoop cluster we created, use command
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">delete</span> <span class="pre">[NAME]</span></code> to delete the cluster with given name:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster delete cluster-001
</pre></div>
</div>
<p>Then undefine the Hadoop specification and the cluster specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop undefine stack-001
$ cm cluster undefine cluster-001
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">May not be available for current version of Cloudmesh Client.</p>
</div>
</div>
</div>
<div class="section" id="advanced-topics-with-hadoop">
<h2>Advanced Topics with Hadoop<a class="headerlink" href="#advanced-topics-with-hadoop" title="Permalink to this headline">¶</a></h2>
<div class="section" id="hadoop-virtual-cluster-with-spark-and-or-pig">
<h3>Hadoop Virtual Cluster with Spark and/or Pig<a class="headerlink" href="#hadoop-virtual-cluster-with-spark-and-or-pig" title="Permalink to this headline">¶</a></h3>
<p>To install Spark and/or Pig with Hadoop cluster, we first use command
<code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">define</span></code> but with <code class="docutils literal"><span class="pre">ADDON</span></code> to define the cluster specification.</p>
<p>For example, we create a 3-node Spark cluster with Pig. To do that, all we
need is to specify <code class="docutils literal"><span class="pre">spark</span></code> as an <code class="docutils literal"><span class="pre">ADDON</span></code> during Hadoop definition:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster define --count 3
$ cm hadoop define spark pig
</pre></div>
</div>
<p>Using <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">addons</span></code>, we are able to check the current supported addon:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop addons
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">avail</span></code>, we can see the detail of the specification for the
Hadoop cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop avail
&gt; stack-001
  local_path                    : /Users/tony/.cloudmesh/stacks/stack-001
  addons                        : [u&#39;spark&#39;, u&#39;pig&#39;]
</pre></div>
</div>
<p>Then we use <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">sync</span></code> and <code class="docutils literal"><span class="pre">cm</span> <span class="pre">hadoop</span> <span class="pre">deploy</span></code> to deploy our Spark
cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm hadoop sync
$ cm hadoop deploy
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This process will take 15 minutes or longer.</p>
</div>
<p>Before we proceed to the next step, there is one more thing we need to, which
is to make sure we are able to ssh from every node to others without password.
To achieve that, we need to execute <code class="docutils literal"><span class="pre">cm</span> <span class="pre">cluster</span> <span class="pre">cross_ssh</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm cluster cross_ssh
</pre></div>
</div>
</div>
<div class="section" id="word-count-example-on-spark">
<h3>Word Count Example on Spark<a class="headerlink" href="#word-count-example-on-spark" title="Permalink to this headline">¶</a></h3>
<p>Now with the cluster ready, let’s run a simple Spark job, Word Count, on one of
William Shakespear’s work.
Use <code class="docutils literal"><span class="pre">cm</span> <span class="pre">vm</span> <span class="pre">ssh</span></code> to log into the <code class="docutils literal"><span class="pre">Namenode</span></code> of the Spark cluster.
It should be the first node of the cluster:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cm vm ssh node-001
cc@hostname$
</pre></div>
</div>
<p>Switch to user <code class="docutils literal"><span class="pre">hadoop</span></code> and check HDFS is set up or not:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cc@hostname$ sudo su - hadoop
hadoop@hostname$
</pre></div>
</div>
<p>Download the input file from the Internet:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">check</span><span class="o">-</span><span class="n">certificate</span> <span class="o">-</span><span class="n">O</span> <span class="n">inputfile</span><span class="o">.</span><span class="n">txt</span> \
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">ocw</span><span class="o">.</span><span class="n">mit</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">ans7870</span><span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="mf">6.006</span><span class="o">/</span><span class="n">s08</span><span class="o">/</span><span class="n">lecturenotes</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">t8</span><span class="o">.</span><span class="n">shakespeare</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>You can also use any other text file you preferred.
Create a new directory <code class="docutils literal"><span class="pre">wordcount</span></code> within HDFS to store the input and output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ hdfs dfs -mkdir /wordcount
</pre></div>
</div>
<p>Store the input text file into the directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ hdfs dfs -put inputfile.txt /wordcount/inputfile.txt
</pre></div>
</div>
<p>Save the following code as <code class="docutils literal"><span class="pre">wordcount.py</span></code> on the local file system on
Namenode:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pyspark</span> <span class="k">import</span> <span class="n">SparkContext</span><span class="p">,</span> <span class="n">SparkConf</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

  <span class="c1"># tak two arguments, input and output</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Usage: wordcount &lt;input&gt; &lt;output&gt;&quot;</span><span class="p">)</span>
    <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

  <span class="c1"># create Spark context with Spark configuration</span>
  <span class="n">conf</span> <span class="o">=</span> <span class="n">SparkConf</span><span class="p">()</span><span class="o">.</span><span class="n">setAppName</span><span class="p">(</span><span class="s2">&quot;Spark Count&quot;</span><span class="p">)</span>
  <span class="n">sc</span> <span class="o">=</span> <span class="n">SparkContext</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">conf</span><span class="p">)</span>

  <span class="c1"># read in text file</span>
  <span class="n">text_file</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">textFile</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

  <span class="c1"># split each line into words</span>
  <span class="c1"># count the occurrence of each word</span>
  <span class="c1"># sort the output based on word</span>
  <span class="n">counts</span> <span class="o">=</span> <span class="n">text_file</span><span class="o">.</span><span class="n">flatMap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span> \
           <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> \
           <span class="o">.</span><span class="n">reduceByKey</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> \
           <span class="o">.</span><span class="n">sortByKey</span><span class="p">()</span>

  <span class="c1"># save the result in the output text file</span>
  <span class="n">counts</span><span class="o">.</span><span class="n">saveAsTextFile</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>Next submit the job to Yarn and run in distribute:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ spark-submit --master yarn --deploy-mode client --executor-memory 1g \
--name wordcount --conf &quot;spark.app.id=wordcount&quot; wordcount.py \
hdfs://192.168.0.236:8020/wordcount/inputfile.txt \
hdfs://192.168.0.236:8020/wordcount/output
</pre></div>
</div>
<p>Finally, take a look at the result in the output directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ hdfs dfs -ls /wordcount/outputfile/
Found 3 items
-rw-r--r--   1 hadoop hadoop,hadoopadmin          0 2017-03-07 21:28 /wordcount/output/_SUCCESS
-rw-r--r--   1 hadoop hadoop,hadoopadmin     483182 2017-03-07 21:28 /wordcount/output/part-00000
-rw-r--r--   1 hadoop hadoop,hadoopadmin     639649 2017-03-07 21:28 /wordcount/output/part-00001
$ hdfs dfs -cat /wordcount/output/part-00000 | less
(u&#39;&#39;, 517065)
(u&#39;&quot;&#39;, 241)
(u&#39;&quot;\&#39;Tis&#39;, 1)
(u&#39;&quot;A&#39;, 4)
(u&#39;&quot;AS-IS&quot;.&#39;, 1)
(u&#39;&quot;Air,&quot;&#39;, 1)
(u&#39;&quot;Alas,&#39;, 1)
(u&#39;&quot;Amen&quot;&#39;, 2)
(u&#39;&quot;Amen&quot;?&#39;, 1)
(u&#39;&quot;Amen,&quot;&#39;, 1)
...
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Gregor von Laszewski.<br/>
    </p>
  </div>
</footer>
  </body>
</html>