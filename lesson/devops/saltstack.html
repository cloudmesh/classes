<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SaltStack &#8212; Big Data Classes</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'Draft',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Notebooks" href="../../notebooks/index.html" />
    <link rel="prev" title="Full Message of salt-call Execution" href="saltstack-ex1-output.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          classes</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../i523/2017/index.html">i523</a></li>
                <li><a href="../index.html">Lessons</a></li>
                <li><a href="../../changelog.html">Changes</a></li>
                <li><a href="https://github.com/cloudmesh/classes">Fork</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2017/index.html">I523 Big Data Applications and Analytics (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#content">Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#additional-content">Additional Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2016/index.html">I523 Big Data Applications and Analytics (2016)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/course.html">Syllabus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/assignments/assignments.html">Homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/gitlab.html">Gitlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_big_data.html">Python for Big Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_lesson1.html">Python Fingerprint Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/linux.html">4.1. Linux Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/latex.html">2.2. LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ubuntu.html">Ubuntu Development Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ssh.html">Using SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/n-resources.html">Homework References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/contributing.html">1.5. Contributing</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../i524/2017/index.html">I524 Big Data and Open Source Software Projects (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/preface/index.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/overview.html">i524 Big Data and Open Source Software Projects (2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/calendar.html">I524 Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/lectures.html">I524 Lectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/assignments.html">I524 Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/hids-techs.html">HID Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/technologies.html">Technologies</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../icloud/2017/index.html">B534 Cloud Computing (2018)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../icloud/2017/index.html#content">Content</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-prerequisites-for-this-class">What are the prerequisites for this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-full-time-student-at-iupui-can-i-take-the-online-version">I am full time student at IUPUI. Can I take the online version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-a-residential-student-at-iu-can-i-take-the-online-version-only">I am a residential student at IU. Can I take the online version only?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#the-class-is-full-what-do-i-do">The class is full what do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-buy-a-textbook">Do I need to buy a textbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-a-computer-to-participate-in-this-class">Do I need a computer to participate in this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#where-is-the-official-iu-calendar-for-the-fall">Where is the official IU calendar for the Fall?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-do-i-ask-a-question">How do I ask a question?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-write-a-research-article-on-computer-science">How to write a research article on computer science?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#which-bibliography-manager-is-required-for-the-class">Which bibliography manager is required for the class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-use-endnote-or-other-bibliography-managers">Can I use endnote or other bibliography managers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#plagiarism-test-and-resources-related-to-that">Plagiarism test and resources related to that</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-many-hours-will-this-course-take-to-work-on-every-week">How many hours will this course take to work on every week?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#is-all-classes-material-final">Is all classes material final?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-changes-to-the-web-page">What are the changes to the web page?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-lectures-should-i-learn-when">What lectures should I learn when?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-you-doing-the-papers">I524: Why are you doing the papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-there-no-homework-to-test-me-on-skills-such-as-ansible-or-python">I524: Why are there no homework to test me on skills such as ansible or python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-not-use-chef-or-another-devops-framework">I524: Why not use chef or another DevOps framework?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-lost">I am lost?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-like-technology-topic-project-etc">I do not like Technology/Topic/Project/etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-not-able-to-attend-the-online-hours">I am not able to attend the online hours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-attend-the-online-sessions">Do I need to attend the online sessions?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-leaning-outcomes">What are the leaning outcomes?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#there-are-so-many-messages-on-piazza-i-can-not-keep-up">There are so many messages on Piazza I can not keep up.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-know-python-what-do-i-do">I do not know python. What do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-techlist-1-homework">Tips: TechList.1 homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#citations">Citations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#spelling">Spelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rubric">Rubric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#timeliness">Timeliness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#outdated-tech-ology">Outdated Tech ology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#techlist-1-and-paper-1-pagecount">Techlist 1 and Paper 1 : Pagecount</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-install-virtualbox">Tips to Install Virtualbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-generate-the-ssh-key-on-ubuntu-vm">Do I generate the SSH key on Ubuntu VM ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#ways-to-run-ubuntu-on-windows-10">Ways to run Ubuntu on Windows 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#don-t-use-anaconda">Don’t use Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#using-ssh-key-for-git-push">Using SSH Key for Git Push</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-write-the-papers-on-osx">Can I write the papers on OSX?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-is-the-nature-of-team-collaboration-on-papers">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#id1">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-due-dates-for-assignments">What are the due dates for assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-good-places-to-find-refernce-entries">What are good places to find refernce entries?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-install-matplotlib">How to install Matplotlib?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-test-if-your-os-can-install-cloudmesh-client">How to test if your OS can install cloudmesh_client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#os-x">OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-write-a-good-paper">Tips to write a Good Paper</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cloud/index.html">Cloud (under construction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/index.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/index.html">Writing Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/index.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../org/index.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/index.html">Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/index.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/draft.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iaas/index.html">IaaS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html">Docker Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible/index.html">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="chef.html">Chef</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html">Compaprison of Configuration management software</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite_cluster.html">Composite Clusters (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Dynamic deployment of arbitrary X software on VC (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hadoop.html">Hadoop Virtual Cluster Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="juju.html">Ubuntu Juju</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb_cluster.html">MongoDB Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openmpi_cluster.html">OpenMPI Virtual Cluster (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack_heat.html">OpenStack Heat</a></li>
<li class="toctree-l2"><a class="reference internal" href="other.html">Other (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">DevOps (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_vc.html">Overview Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet.html">Puppet</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack-ex1-output.html">Full Message of <code class="docutils literal"><span class="pre">salt-call</span></code> Execution</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SaltStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/index.html">Notebooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">Todos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../todo.html#general">General</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#version-unreleased">%%version%% (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id1">3.2.0 (2017-08-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id5">3.1.1 (2017-02-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id10">3.1.0 (2017-02-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id15">3.0.9 (2017-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id20">3.0.8 (2017-01-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id24">3.0.7 (2017-01-20)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id29">3.0.6 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id32">3.0.5 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id37">3.0.4 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id38">3.0.3 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id41">3.0.2 (2017-01-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id42">3.0.1 (2017-01-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id43">3.0 (2017-01-06)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">SaltStack</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#salt-installation">Salt Installation</a><ul>
<li><a class="reference internal" href="#guideline-on-india-futuresystems">Guideline on India FutureSystems</a><ul>
<li><a class="reference internal" href="#quick-instructions">Quick instructions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#root-access"><code class="docutils literal"><span class="pre">root</span></code> Access</a></li>
<li><a class="reference internal" href="#update-hostname">Update Hostname</a></li>
<li><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li><a class="reference internal" href="#one-line-installation-salt-minion">One-Line Installation Salt Minion</a></li>
<li><a class="reference internal" href="#sls-files">SLS Files</a></li>
<li><a class="reference internal" href="#salt-state-tree">Salt State Tree</a></li>
<li><a class="reference internal" href="#top-file">Top File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#salt-call">Salt Call</a><ul>
<li><a class="reference internal" href="#test">Test</a></li>
<li><a class="reference internal" href="#how-it-works">How It Works</a></li>
</ul>
</li>
<li><a class="reference internal" href="#master-and-minion">Master and Minion</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#list-of-registered-minions">List of Registered Minions</a></li>
<li><a class="reference internal" href="#nginx-installation-and-start">Nginx Installation and Start</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-commands">Other Commands</a><ul>
<li><a class="reference internal" href="#ping">Ping</a></li>
<li><a class="reference internal" href="#system-command">System Command</a></li>
<li><a class="reference internal" href="#sys-doc">sys.doc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grains">Grains</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a><ul>
<li><a class="reference internal" href="#exercise-i">Exercise I</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2017/index.html">I523 Big Data Applications and Analytics (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#content">Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2017/index.html#additional-content">Additional Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../i523/2016/index.html">I523 Big Data Applications and Analytics (2016)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/course.html">Syllabus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/assignments/assignments.html">Homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/gitlab.html">Gitlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_big_data.html">Python for Big Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/python_lesson1.html">Python Fingerprint Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/refcards.html">Refcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/linux.html">4.1. Linux Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/latex.html">2.2. LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ubuntu.html">Ubuntu Development Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/ssh.html">Using SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i523/2016/n-resources.html">Homework References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/contributing.html">1.5. Contributing</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../i524/2017/index.html">I524 Big Data and Open Source Software Projects (2017)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/preface/index.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/overview.html">i524 Big Data and Open Source Software Projects (2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/calendar.html">I524 Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/lectures.html">I524 Lectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/assignments.html">I524 Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/hids-techs.html">HID Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i524/2017/technologies.html">Technologies</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../icloud/2017/index.html">B534 Cloud Computing (2018)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../icloud/2017/index.html#content">Content</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-prerequisites-for-this-class">What are the prerequisites for this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-full-time-student-at-iupui-can-i-take-the-online-version">I am full time student at IUPUI. Can I take the online version?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-a-residential-student-at-iu-can-i-take-the-online-version-only">I am a residential student at IU. Can I take the online version only?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#the-class-is-full-what-do-i-do">The class is full what do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-buy-a-textbook">Do I need to buy a textbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-a-computer-to-participate-in-this-class">Do I need a computer to participate in this class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#where-is-the-official-iu-calendar-for-the-fall">Where is the official IU calendar for the Fall?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-do-i-ask-a-question">How do I ask a question?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-write-a-research-article-on-computer-science">How to write a research article on computer science?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#which-bibliography-manager-is-required-for-the-class">Which bibliography manager is required for the class?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-use-endnote-or-other-bibliography-managers">Can I use endnote or other bibliography managers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#plagiarism-test-and-resources-related-to-that">Plagiarism test and resources related to that</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-many-hours-will-this-course-take-to-work-on-every-week">How many hours will this course take to work on every week?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#is-all-classes-material-final">Is all classes material final?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-changes-to-the-web-page">What are the changes to the web page?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-lectures-should-i-learn-when">What lectures should I learn when?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-you-doing-the-papers">I524: Why are you doing the papers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-are-there-no-homework-to-test-me-on-skills-such-as-ansible-or-python">I524: Why are there no homework to test me on skills such as ansible or python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i524-why-not-use-chef-or-another-devops-framework">I524: Why not use chef or another DevOps framework?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-lost">I am lost?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-like-technology-topic-project-etc">I do not like Technology/Topic/Project/etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-am-not-able-to-attend-the-online-hours">I am not able to attend the online hours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-need-to-attend-the-online-sessions">Do I need to attend the online sessions?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-leaning-outcomes">What are the leaning outcomes?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#there-are-so-many-messages-on-piazza-i-can-not-keep-up">There are so many messages on Piazza I can not keep up.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#i-do-not-know-python-what-do-i-do">I do not know python. What do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-techlist-1-homework">Tips: TechList.1 homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#citations">Citations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#spelling">Spelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#rubric">Rubric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#timeliness">Timeliness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#outdated-tech-ology">Outdated Tech ology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#techlist-1-and-paper-1-pagecount">Techlist 1 and Paper 1 : Pagecount</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-install-virtualbox">Tips to Install Virtualbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#do-i-generate-the-ssh-key-on-ubuntu-vm">Do I generate the SSH key on Ubuntu VM ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#ways-to-run-ubuntu-on-windows-10">Ways to run Ubuntu on Windows 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#don-t-use-anaconda">Don’t use Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#using-ssh-key-for-git-push">Using SSH Key for Git Push</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#can-i-write-the-papers-on-osx">Can I write the papers on OSX?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-is-the-nature-of-team-collaboration-on-papers">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#id1">What is the nature of team collaboration on papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-the-due-dates-for-assignments">What are the due dates for assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#what-are-good-places-to-find-refernce-entries">What are good places to find refernce entries?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-install-matplotlib">How to install Matplotlib?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#how-to-test-if-your-os-can-install-cloudmesh-client">How to test if your OS can install cloudmesh_client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#os-x">OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#tips-to-write-a-good-paper">Tips to write a Good Paper</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cloud/index.html">Cloud (under construction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/index.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/index.html">Writing Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/index.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../org/index.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prg/index.html">Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/index.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/draft.html">Software Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iaas/index.html">IaaS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html">Docker Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible/index.html">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="chef.html">Chef</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html">Compaprison of Configuration management software</a></li>
<li class="toctree-l2"><a class="reference internal" href="composite_cluster.html">Composite Clusters (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Dynamic deployment of arbitrary X software on VC (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hadoop.html">Hadoop Virtual Cluster Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="juju.html">Ubuntu Juju</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb_cluster.html">MongoDB Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openmpi_cluster.html">OpenMPI Virtual Cluster (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack_heat.html">OpenStack Heat</a></li>
<li class="toctree-l2"><a class="reference internal" href="other.html">Other (Under Preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">DevOps (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_vc.html">Overview Virtual Cluster (under preparation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet.html">Puppet</a></li>
<li class="toctree-l2"><a class="reference internal" href="saltstack-ex1-output.html">Full Message of <code class="docutils literal"><span class="pre">salt-call</span></code> Execution</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SaltStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/index.html">Notebooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">Todos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../todo.html#general">General</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#version-unreleased">%%version%% (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id1">3.2.0 (2017-08-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id5">3.1.1 (2017-02-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id10">3.1.0 (2017-02-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id15">3.0.9 (2017-01-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id20">3.0.8 (2017-01-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id24">3.0.7 (2017-01-20)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id29">3.0.6 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id32">3.0.5 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id37">3.0.4 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id38">3.0.3 (2017-01-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id41">3.0.2 (2017-01-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id42">3.0.1 (2017-01-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#id43">3.0 (2017-01-06)</a></li>
</ul>
</li>
</ul>
</ul>
</li><ul>
<li><a class="reference internal" href="#">SaltStack</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#salt-installation">Salt Installation</a><ul>
<li><a class="reference internal" href="#guideline-on-india-futuresystems">Guideline on India FutureSystems</a><ul>
<li><a class="reference internal" href="#quick-instructions">Quick instructions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#root-access"><code class="docutils literal"><span class="pre">root</span></code> Access</a></li>
<li><a class="reference internal" href="#update-hostname">Update Hostname</a></li>
<li><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li><a class="reference internal" href="#one-line-installation-salt-minion">One-Line Installation Salt Minion</a></li>
<li><a class="reference internal" href="#sls-files">SLS Files</a></li>
<li><a class="reference internal" href="#salt-state-tree">Salt State Tree</a></li>
<li><a class="reference internal" href="#top-file">Top File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#salt-call">Salt Call</a><ul>
<li><a class="reference internal" href="#test">Test</a></li>
<li><a class="reference internal" href="#how-it-works">How It Works</a></li>
</ul>
</li>
<li><a class="reference internal" href="#master-and-minion">Master and Minion</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#list-of-registered-minions">List of Registered Minions</a></li>
<li><a class="reference internal" href="#nginx-installation-and-start">Nginx Installation and Start</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-commands">Other Commands</a><ul>
<li><a class="reference internal" href="#ping">Ping</a></li>
<li><a class="reference internal" href="#system-command">System Command</a></li>
<li><a class="reference internal" href="#sys-doc">sys.doc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grains">Grains</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a><ul>
<li><a class="reference internal" href="#exercise-i">Exercise I</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p></p>
<hr>
<small>
<b>Web Links</b>
<ul>
    <li><a href="https://cloudmesh.github.io/classes/i523/2017">i523</a> </li>  
    <li><a href="https://cloudmesh.github.io/classes/i524">i524</a> </li>  

  </ul>
</small>

<p></p>
<hr>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="saltstack">
<span id="ref-class-lesson-devops-saltstack"></span><h1>SaltStack<a class="headerlink" href="#saltstack" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This lesson will introduce you to SaltStack, a configuration
management system.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Duration: 1 hour and 30 minutes</p>
</div>
</div>
<div class="section" id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<p>In order to conduct this lesson, you should have knowledge of</p>
<ul class="simple">
<li><a class="reference external" href="../shell-access.html">Shell Access</a></li>
<li><a class="reference external" href="../linux/packagemanagement.html">Package Managers</a></li>
</ul>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Salt or SaltStack is an open source software for managing configurations and
execution application. It is written in Python and runs with ZeroMQ which is an
asynchronous messaging library. Salt is similar to Puppet, Ansible, and Chef.</p>
<p>For more introduction to Salt, see here:
<a class="reference external" href="http://docs.saltstack.com/en/latest/topics/index.html">http://docs.saltstack.com/en/latest/topics/index.html</a></p>
</div>
<div class="section" id="salt-installation">
<h2>Salt Installation<a class="headerlink" href="#salt-installation" title="Permalink to this headline">¶</a></h2>
<p>Salt can be installed by package management tools or a simple installation
script. This lesson is based on FutureSystems which means you create a VM
instance on India OpenStack and install Salt on top of it. We assume you use an
OpenStack instance on FutureSystems.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If don’t know how to launch a new instance? <a class="reference external" href="../iaas/openstack.html#launching-a-new-instance">See here</a></p>
</div>
<div class="section" id="guideline-on-india-futuresystems">
<h3>Guideline on India FutureSystems<a class="headerlink" href="#guideline-on-india-futuresystems" title="Permalink to this headline">¶</a></h3>
<p>You <em>DON’T</em> install Salt on India. If you see the cursor like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>[albert@i136 ~]$
</pre></div>
</div>
<p>You <em>should NOT</em> install any program.</p>
<p>You have to log into <em>your VM instance</em> to install Puppet. <code class="docutils literal"><span class="pre">i136</span></code> is a India
login node which is like a gateway.  You are supposed not to perform any tasks
on India, especially if you require <code class="docutils literal"><span class="pre">root</span></code> privileges. Please create a VM
instance on India OpenStack and SSH into your VM to run and install your
software. You will have a full access of your virtual machine instance.</p>
<div class="section" id="quick-instructions">
<h4>Quick instructions<a class="headerlink" href="#quick-instructions" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Launch a VM instance is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>nova boot --flavor m1.small --image futuresystems/ubuntu-14.04 --key_name $USER-key $USER-salt
</pre></div>
</div>
</li>
<li><p class="first">Once your VM instance is ready, try to login using SSH:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">ubuntu</span><span class="o">@</span><span class="p">[</span><span class="n">IP</span> <span class="n">ADDRESS</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="root-access">
<h3><code class="docutils literal"><span class="pre">root</span></code> Access<a class="headerlink" href="#root-access" title="Permalink to this headline">¶</a></h3>
<p>We will install Salt and other software using <code class="docutils literal"><span class="pre">root</span></code> account. Using <code class="docutils literal"><span class="pre">root</span></code>
account means that you have a permission to use entire system resources without
any restriction. Since this lesson includes a couple of examples using Salt, we
recommend to use OpenStack VM instance on FutureSystems. DON’T try to
install Puppet on your local machine or on the <code class="docutils literal"><span class="pre">india.futuresystems.org</span></code> host.
Use a benefit of VM instance which you can easily delete and re-create a new
one.</p>
<p>On a VM instance, simply run a switch user command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>ubuntu@salt:~$ sudo su -
</pre></div>
</div>
<p>If you see <code class="docutils literal"><span class="pre">root</span></code> label, you are in <code class="docutils literal"><span class="pre">root</span></code> account on your machine:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@salt</span><span class="p">:</span><span class="o">~</span><span class="c1">#</span>
</pre></div>
</div>
</div>
<div class="section" id="update-hostname">
<h3>Update Hostname<a class="headerlink" href="#update-hostname" title="Permalink to this headline">¶</a></h3>
<p>If you see <code class="docutils literal"><span class="pre">sudo:</span> <span class="pre">unable</span> <span class="pre">to</span> <span class="pre">resolve</span> <span class="pre">host</span></code>, try to add hostname with the
following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">127.0.1.1 $HOSTNAME&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
</pre></div>
</div>
</div>
<div class="section" id="ubuntu">
<h3>Ubuntu<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h3>
<p>First, add the salt repository.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">ppa</span><span class="p">:</span><span class="n">saltstack</span><span class="o">/</span><span class="n">salt</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</pre></div>
</div>
<p>Core components will be installed with the following commands. If you run Salt
in a local mode, install <code class="docutils literal"><span class="pre">salt-minion</span></code> only.  The master, minion, or syndic
will be installed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">master</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">minion</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">syndic</span>
</pre></div>
</div>
<p>A few more components are also installed with the following commands.  The
salt-cloud, salt-ssh, and salt-api will be installed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">cloud</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">ssh</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">api</span>
</pre></div>
</div>
</div>
<div class="section" id="one-line-installation-salt-minion">
<h3>One-Line Installation Salt Minion<a class="headerlink" href="#one-line-installation-salt-minion" title="Permalink to this headline">¶</a></h3>
<p>With a caution, one-line installation can be used to have a quick installation
on various operating systems.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sh</span> <span class="n">ins</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">saltstack</span><span class="o">.</span><span class="n">com</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">sh</span> <span class="o">-</span><span class="n">s</span> <span class="o">--</span> <span class="n">git</span> <span class="n">develop</span>
</pre></div>
</div>
<p>Or two lines will be used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">saltstack</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">o</span> <span class="n">install_salt</span><span class="o">.</span><span class="n">sh</span>
<span class="n">sudo</span> <span class="n">sh</span> <span class="n">install_salt</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="sls-files">
<h3>SLS Files<a class="headerlink" href="#sls-files" title="Permalink to this headline">¶</a></h3>
<p>SaLt State file (SLS) is instructions of tasks in which a system should be in,
and what applications should be installed and configured. SLS data is written
in a simple format, YAML file with a <code class="docutils literal"><span class="pre">.sls</span></code> file extension. This is often
called configuration management. We will create a few files to try a simple
example of starting a Apache web server so that you can understand basic flows
in the use case.</p>
</div>
<div class="section" id="salt-state-tree">
<h3>Salt State Tree<a class="headerlink" href="#salt-state-tree" title="Permalink to this headline">¶</a></h3>
<p>Salt state tree is a collection of SLS files that live under the directory
specified in <code class="docutils literal"><span class="pre">file_roots</span></code>. We use a default directory <code class="docutils literal"><span class="pre">/srv/salt</span></code> to store
sls files.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">salt</span>
</pre></div>
</div>
</div>
<div class="section" id="top-file">
<h3>Top File<a class="headerlink" href="#top-file" title="Permalink to this headline">¶</a></h3>
<p>The top file (<code class="docutils literal"><span class="pre">top.sls</span></code>) is to map what <strong>SLS modules</strong> get loaded onto what
<strong>minions</strong> via the state system. For example <strong>apache sls module</strong> can be
loaded to install and run on the target machine using <code class="docutils literal"><span class="pre">top.sls</span></code> file.  The
top file creates a few general abstractions. First, it maps what nodes should
pull from which environments, next it defines which matches systems should draw
from.</p>
<ul>
<li><p class="first">Create <code class="docutils literal"><span class="pre">top.sls</span></code> file for <code class="docutils literal"><span class="pre">webserver</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nano</span> <span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">salt</span><span class="o">/</span><span class="n">top</span><span class="o">.</span><span class="n">sls</span>
</pre></div>
</div>
</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">base</span></code> environment will be loaded. type the following three lines in the
<code class="docutils literal"><span class="pre">top.sls</span></code> file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">base</span><span class="p">:</span>
  <span class="s1">&#39;*&#39;</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">webserver</span>
</pre></div>
</div>
<ul>
<li><p class="first">Create <code class="docutils literal"><span class="pre">webserver.sls</span></code> file to install Apache:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nano</span> <span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">salt</span><span class="o">/</span><span class="n">webserver</span><span class="o">.</span><span class="n">sls</span>
</pre></div>
</div>
</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">webserver.sls</span></code> content include <code class="docutils literal"><span class="pre">apache2</span></code> package installation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">apache2</span><span class="p">:</span>              <span class="c1"># ID declaration</span>
  <span class="n">pkg</span><span class="p">:</span>                <span class="c1"># state declaration</span>
    <span class="o">-</span> <span class="n">installed</span>       <span class="c1"># function declaration</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use <strong>httpd</strong> for Fedora/RHEL, <strong>apache</strong> for others in the package
name.</p>
</div>
</div>
</div>
<div class="section" id="salt-call">
<h2>Salt Call<a class="headerlink" href="#salt-call" title="Permalink to this headline">¶</a></h2>
<p>We use <code class="docutils literal"><span class="pre">salt-call</span></code> command to try our example of running an Apache web server.
With <code class="docutils literal"><span class="pre">--local</span></code> option, we can simply run Salt without communicating with a
Salt master. The <code class="docutils literal"><span class="pre">--local</span></code> option indicates that <em>salt-minion</em> reads the
state tree in a local file system and does not to connect to a Salt Master for
instructions. Optionally you can you <code class="docutils literal"><span class="pre">-l</span></code> option for generating debug
messages:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="o">-</span><span class="n">call</span> <span class="o">--</span><span class="n">local</span> <span class="n">state</span><span class="o">.</span><span class="n">highstate</span>
</pre></div>
</div>
<p>It runs Salt in a local mode.</p>
<p>The expected output messages look like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span>    <span class="p">]</span> <span class="n">Loading</span> <span class="n">fresh</span> <span class="n">modules</span> <span class="k">for</span> <span class="n">state</span> <span class="n">activity</span>
<span class="p">[</span><span class="n">INFO</span>    <span class="p">]</span> <span class="n">Fetching</span> <span class="n">file</span> <span class="kn">from</span> <span class="nn">saltenv</span> <span class="s1">&#39;base&#39;</span><span class="p">,</span> <span class="o">**</span> <span class="n">done</span> <span class="o">**</span> <span class="s1">&#39;top.sls&#39;</span>
<span class="p">[</span><span class="n">INFO</span>    <span class="p">]</span> <span class="n">Creating</span> <span class="n">module</span> <span class="nb">dir</span> <span class="s1">&#39;/var/cache/salt/minion/extmods/modules&#39;</span>

<span class="o">...</span><span class="p">(</span><span class="n">skip</span><span class="p">)</span><span class="o">...</span>

<span class="n">Summary</span>
<span class="o">------------</span>
<span class="n">Succeeded</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="n">changed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Failed</span><span class="p">:</span>    <span class="mi">0</span>
<span class="o">------------</span>
<span class="n">Total</span> <span class="n">states</span> <span class="n">run</span><span class="p">:</span>     <span class="mi">1</span>
</pre></div>
</div>
<p><a class="reference internal" href="saltstack-ex1-output.html#ref-class-lesson-devops-saltstack-ex1-output"><span class="std std-ref">Full output message</span></a></p>
<p>Now, you have Apache up and running.</p>
<div class="section" id="test">
<h3>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>Check your Apache is running with <code class="docutils literal"><span class="pre">nc</span></code> command.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nc</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">z</span> <span class="n">salt</span> <span class="mi">80</span>
</pre></div>
</div>
<p>You have running Apache if you see the message like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>Connection to salt 80 port [tcp/http] succeeded!
</pre></div>
</div>
</div>
<div class="section" id="how-it-works">
<h3>How It Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h3>
<p>The instructions we made are executed in the following order:</p>
<ul class="simple">
<li>The Salt minion reads the top.sls file and determines that it is a part of
the group matched by * glob.</li>
<li>It reads the webserver SLS and applies.</li>
<li><code class="docutils literal"><span class="pre">webserver.sls</span></code> file will be loaded and finds the apache state, which
installs the Apache package.</li>
<li>The Salt minion now have Apache web server installed.</li>
</ul>
</div>
</div>
<div class="section" id="master-and-minion">
<h2>Master and Minion<a class="headerlink" href="#master-and-minion" title="Permalink to this headline">¶</a></h2>
<p>In the previous example, we tested Salt Minion in a local mode without a master.
Salt uses a client-server model to propagate configurations, so we will have an
another example of Salt to run a master and a minion in a same machine. You can
apply this master-minion example to your systems if you have multiple machines
to manage.</p>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>We already installed a Salt master and a minion in the earlier section, but
here is a reminder of the installation.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">software</span><span class="o">-</span><span class="n">properties</span>
<span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">ppa</span><span class="p">:</span><span class="n">saltstack</span><span class="o">/</span><span class="n">salt</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">master</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">salt</span><span class="o">-</span><span class="n">minion</span>
<span class="n">service</span> <span class="n">salt</span><span class="o">-</span><span class="n">master</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">salt</span><span class="o">-</span><span class="n">minion</span> <span class="n">start</span>
</pre></div>
</div>
<p>If you don’t have <code class="docutils literal"><span class="pre">salt-key</span></code> or <code class="docutils literal"><span class="pre">salt-master</span></code> command, you need to run
these commands.</p>
</div>
<div class="section" id="list-of-registered-minions">
<h3>List of Registered Minions<a class="headerlink" href="#list-of-registered-minions" title="Permalink to this headline">¶</a></h3>
<p>The following command Lists all public keys registered on the master. Salt uses
key-based authentication so the registered keys are important to communicate
each other.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="o">-</span><span class="n">key</span> <span class="o">-</span><span class="n">L</span>
</pre></div>
</div>
<p>Our test machine (hostname: salt) may generate outputs like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Accepted</span> <span class="n">Keys</span><span class="p">:</span>
<span class="n">Unaccepted</span> <span class="n">Keys</span><span class="p">:</span>
<span class="n">salt</span>
<span class="n">Rejected</span> <span class="n">Keys</span><span class="p">:</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">Unaccepted</span> <span class="pre">Keys</span></code> means that there is no registered keys for the hosts,
in this example, the <code class="docutils literal"><span class="pre">salt</span></code> host is not registered.  What we need to do is
simply registering the host with the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="o">-</span><span class="n">key</span> <span class="o">-</span><span class="n">a</span> <span class="s1">&#39;$HOSTNAME&#39;</span>
</pre></div>
</div>
<p>Use a different hostname if you have other name.</p>
<p>Once you registered your host, list public keys again to confirm that it’s
registered. The output looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@salt</span><span class="p">:</span><span class="o">~</span><span class="c1"># salt-key -L</span>
<span class="n">Accepted</span> <span class="n">Keys</span><span class="p">:</span>
<span class="n">salt</span>
<span class="n">Unaccepted</span> <span class="n">Keys</span><span class="p">:</span>
<span class="n">Rejected</span> <span class="n">Keys</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="nginx-installation-and-start">
<h3>Nginx Installation and Start<a class="headerlink" href="#nginx-installation-and-start" title="Permalink to this headline">¶</a></h3>
<p>Before we install and start Nginx web server, we may need to stop an Apache web
server first which uses HTTP (80) port.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">apache2</span> <span class="n">stop</span>
</pre></div>
</div>
<p>The following commands install <code class="docutils literal"><span class="pre">nginx</span></code> web server and starts its service.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span> <span class="s1">&#39;*&#39;</span> <span class="n">pkg</span><span class="o">.</span><span class="n">install</span> <span class="n">nginx</span>
</pre></div>
</div>
<p>The output looks like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="p">:</span>
    <span class="o">----------</span>
    <span class="n">nginx</span><span class="p">:</span>
         <span class="o">----------</span>
         <span class="n">new</span><span class="p">:</span>
             <span class="mf">1.4</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="mi">1</span><span class="n">ubuntu3</span><span class="o">.</span><span class="mi">2</span>
         <span class="n">old</span><span class="p">:</span>
             <span class="mi">1</span>
</pre></div>
</div>
<p>The following command starts a <code class="docutils literal"><span class="pre">nginx</span></code> web server.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span> <span class="s1">&#39;*&#39;</span> <span class="n">service</span><span class="o">.</span><span class="n">start</span> <span class="n">nginx</span>
</pre></div>
</div>
<p>The output looks like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="p">:</span>
    <span class="kc">True</span>
</pre></div>
</div>
<ul class="simple">
<li>‘*’: all hosts
The ‘*’ refers to all minions whose key is accepted. In this example,
<code class="docutils literal"><span class="pre">salt</span></code> in only minion targeted to install <code class="docutils literal"><span class="pre">nginx</span></code>.  The particular
hostname can be speicified e.g. <code class="docutils literal"><span class="pre">salt</span> <span class="pre">'salt'</span> <span class="pre">...</span></code>.</li>
<li>pkg.install: Install a package, <code class="docutils literal"><span class="pre">refresh=True</span></code> option can be added to
update the dpkg database.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Other Software Installation.</p>
<p class="last">You may notice that software installation can be done with a name of
the software.  For example, If you like to install <code class="docutils literal"><span class="pre">Mongo</span> <span class="pre">DB</span></code>, you
can run <code class="docutils literal"><span class="pre">salt</span> <span class="pre">'*'</span> <span class="pre">pkg.install</span> <span class="pre">mongodb</span></code>. Other software are similar,
you need to specify an exact name of the software.</p>
</div>
</div>
</div>
<div class="section" id="other-commands">
<h2>Other Commands<a class="headerlink" href="#other-commands" title="Permalink to this headline">¶</a></h2>
<p>In the previous example, we saw Salt can install and start a service but we
didn’t try other commands.  Salt has many other commands to control remote
systems in parallel. Let’s review a few commands.</p>
<div class="section" id="ping">
<h3>Ping<a class="headerlink" href="#ping" title="Permalink to this headline">¶</a></h3>
<p>To check remote machines are alive, we can use <code class="docutils literal"><span class="pre">ping</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@salt</span><span class="p">:</span><span class="o">~</span><span class="c1"># salt &#39;*&#39; test.ping</span>
<span class="n">salt</span><span class="p">:</span>
    <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="system-command">
<h3>System Command<a class="headerlink" href="#system-command" title="Permalink to this headline">¶</a></h3>
<p>If you have a system command to execute remotely, you can use <code class="docutils literal"><span class="pre">cmd.run</span></code>
sub-command. Our test result looks like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@salt</span><span class="p">:</span><span class="o">~</span><span class="c1"># salt &#39;*&#39; cmd.run &#39;ifconfig&#39;</span>
<span class="n">salt</span><span class="p">:</span>

  <span class="n">eth0</span>      <span class="n">Link</span> <span class="n">encap</span><span class="p">:</span><span class="n">Ethernet</span>  <span class="n">HWaddr</span> <span class="n">fa</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="mi">6</span><span class="n">d</span><span class="p">:</span><span class="n">a1</span><span class="p">:</span><span class="mi">40</span>
            <span class="n">inet</span> <span class="n">addr</span><span class="p">:</span><span class="mf">10.23</span><span class="o">.</span><span class="mf">0.1</span>  <span class="n">Bcast</span><span class="p">:</span><span class="mf">10.23</span><span class="o">.</span><span class="mf">3.255</span>  <span class="n">Mask</span><span class="p">:</span><span class="mf">255.255</span><span class="o">.</span><span class="mf">252.0</span>
            <span class="n">inet6</span> <span class="n">addr</span><span class="p">:</span> <span class="n">fe80</span><span class="p">::</span><span class="n">f816</span><span class="p">:</span><span class="mi">3</span><span class="n">eff</span><span class="p">:</span><span class="n">fe6d</span><span class="p">:</span><span class="n">a140</span><span class="o">/</span><span class="mi">64</span> <span class="n">Scope</span><span class="p">:</span><span class="n">Link</span>
            <span class="n">UP</span> <span class="n">BROADCAST</span> <span class="n">RUNNING</span> <span class="n">MULTICAST</span>  <span class="n">MTU</span><span class="p">:</span><span class="mi">1400</span>  <span class="n">Metric</span><span class="p">:</span><span class="mi">1</span>
            <span class="n">RX</span> <span class="n">packets</span><span class="p">:</span><span class="mi">95868</span> <span class="n">errors</span><span class="p">:</span><span class="mi">0</span> <span class="n">dropped</span><span class="p">:</span><span class="mi">0</span> <span class="n">overruns</span><span class="p">:</span><span class="mi">0</span> <span class="n">frame</span><span class="p">:</span><span class="mi">0</span>
            <span class="n">TX</span> <span class="n">packets</span><span class="p">:</span><span class="mi">64074</span> <span class="n">errors</span><span class="p">:</span><span class="mi">0</span> <span class="n">dropped</span><span class="p">:</span><span class="mi">0</span> <span class="n">overruns</span><span class="p">:</span><span class="mi">0</span> <span class="n">carrier</span><span class="p">:</span><span class="mi">0</span>
            <span class="n">collisions</span><span class="p">:</span><span class="mi">0</span> <span class="n">txqueuelen</span><span class="p">:</span><span class="mi">1000</span>
            <span class="n">RX</span> <span class="nb">bytes</span><span class="p">:</span><span class="mi">83533414</span> <span class="p">(</span><span class="mf">83.5</span> <span class="n">MB</span><span class="p">)</span>  <span class="n">TX</span> <span class="nb">bytes</span><span class="p">:</span><span class="mi">7411580</span> <span class="p">(</span><span class="mf">7.4</span> <span class="n">MB</span><span class="p">)</span>

  <span class="n">lo</span>        <span class="n">Link</span> <span class="n">encap</span><span class="p">:</span><span class="n">Local</span> <span class="n">Loopback</span>
            <span class="n">inet</span> <span class="n">addr</span><span class="p">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>  <span class="n">Mask</span><span class="p">:</span><span class="mf">255.0</span><span class="o">.</span><span class="mf">0.0</span>
            <span class="n">inet6</span> <span class="n">addr</span><span class="p">:</span> <span class="p">::</span><span class="mi">1</span><span class="o">/</span><span class="mi">128</span> <span class="n">Scope</span><span class="p">:</span><span class="n">Host</span>
            <span class="n">UP</span> <span class="n">LOOPBACK</span> <span class="n">RUNNING</span>  <span class="n">MTU</span><span class="p">:</span><span class="mi">65536</span>  <span class="n">Metric</span><span class="p">:</span><span class="mi">1</span>
            <span class="n">RX</span> <span class="n">packets</span><span class="p">:</span><span class="mi">4798</span> <span class="n">errors</span><span class="p">:</span><span class="mi">0</span> <span class="n">dropped</span><span class="p">:</span><span class="mi">0</span> <span class="n">overruns</span><span class="p">:</span><span class="mi">0</span> <span class="n">frame</span><span class="p">:</span><span class="mi">0</span>
            <span class="n">TX</span> <span class="n">packets</span><span class="p">:</span><span class="mi">4798</span> <span class="n">errors</span><span class="p">:</span><span class="mi">0</span> <span class="n">dropped</span><span class="p">:</span><span class="mi">0</span> <span class="n">overruns</span><span class="p">:</span><span class="mi">0</span> <span class="n">carrier</span><span class="p">:</span><span class="mi">0</span>
            <span class="n">collisions</span><span class="p">:</span><span class="mi">0</span> <span class="n">txqueuelen</span><span class="p">:</span><span class="mi">0</span>
            <span class="n">RX</span> <span class="nb">bytes</span><span class="p">:</span><span class="mi">1541859</span> <span class="p">(</span><span class="mf">1.5</span> <span class="n">MB</span><span class="p">)</span>  <span class="n">TX</span> <span class="nb">bytes</span><span class="p">:</span><span class="mi">1541859</span> <span class="p">(</span><span class="mf">1.5</span> <span class="n">MB</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sys-doc">
<h3>sys.doc<a class="headerlink" href="#sys-doc" title="Permalink to this headline">¶</a></h3>
<p>It returns all possible sub commands.</p>
<dl class="docutils">
<dt>::</dt>
<dd>salt ‘*’ sys.doc</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you pipe to <code class="docutils literal"><span class="pre">more</span></code>, it is easier to read. Run <code class="docutils literal"><span class="pre">salt</span> <span class="pre">'*'</span>
<span class="pre">sys.doc|more</span></code></p>
</div>
</div>
</div>
<div class="section" id="grains">
<h2>Grains<a class="headerlink" href="#grains" title="Permalink to this headline">¶</a></h2>
<p>One of the interesting features in Salt is Grains. It runs commands when the
remote machines satisfy the conditions specified with <code class="docutils literal"><span class="pre">-G</span></code> option.  For
example, if you like to view IP address on <em>Ubuntu</em> minions (remote machines),
run salt like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@salt</span><span class="p">:</span><span class="o">~</span><span class="c1"># salt -G &#39;os:Ubuntu&#39; grains.get ip_interfaces:eth0</span>
<span class="n">salt</span><span class="p">:</span>
    <span class="o">-</span> <span class="mf">10.23</span><span class="o">.</span><span class="mf">0.162</span>
</pre></div>
</div>
<p>The similar command is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span> <span class="s1">&#39;*&#39;</span> <span class="n">network</span><span class="o">.</span><span class="n">interfaces</span>
</pre></div>
</div>
<p>which displays network information of all remote minions. With <code class="docutils literal"><span class="pre">-G</span></code> option,
you can apply commands on particular minions.</p>
<ul>
<li><p class="first">Available grains can be listed by using the <code class="docutils literal"><span class="pre">grains.ls</span></code> module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span> <span class="s1">&#39;*&#39;</span> <span class="n">grains</span><span class="o">.</span><span class="n">ls</span>
</pre></div>
</div>
</li>
</ul>
<p>The output looks like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">SSDs</span>
    <span class="o">-</span> <span class="n">biosreleasedate</span>
    <span class="o">-</span> <span class="n">biosversion</span>
    <span class="o">-</span> <span class="n">cpu_flags</span>
    <span class="o">-</span> <span class="n">cpu_model</span>
    <span class="o">-</span> <span class="n">cpuarch</span>
    <span class="o">-</span> <span class="n">domain</span>
    <span class="o">-</span> <span class="n">fqdn</span>
    <span class="o">-</span> <span class="n">fqdn_ip4</span>
    <span class="o">-</span> <span class="n">fqdn_ip6</span>
    <span class="o">-</span> <span class="n">gpus</span>

    <span class="o">...</span><span class="p">(</span><span class="n">skip</span><span class="p">)</span><span class="o">...</span>

    <span class="o">-</span> <span class="n">saltversioninfo</span>
    <span class="o">-</span> <span class="n">serialnumber</span>
    <span class="o">-</span> <span class="n">server_id</span>
    <span class="o">-</span> <span class="n">shell</span>
    <span class="o">-</span> <span class="n">virtual</span>
    <span class="o">-</span> <span class="n">zmqversion</span>
</pre></div>
</div>
<ul>
<li><p class="first">If you use ‘grains.items’, you will see the values in each grain:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">salt</span> <span class="s1">&#39;*&#39;</span> <span class="n">grains</span><span class="o">.</span><span class="n">items</span>
</pre></div>
</div>
</li>
</ul>
<p>The output looks like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">...</span><span class="p">(</span><span class="n">skip</span><span class="p">)</span><span class="o">...</span>

<span class="n">server_id</span><span class="p">:</span>
   <span class="mi">1540459516</span>
<span class="n">shell</span><span class="p">:</span>
    <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="n">virtual</span><span class="p">:</span>
    <span class="n">kvm</span>
<span class="n">zmqversion</span><span class="p">:</span>
    <span class="mf">4.0</span><span class="o">.</span><span class="mi">4</span>
</pre></div>
</div>
<p>For more information, see details here:
<a class="reference external" href="http://docs.saltstack.com/en/latest/topics/targeting/grains.html">http://docs.saltstack.com/en/latest/topics/targeting/grains.html</a></p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>This lesson is based on the Salt Documentation. Some reference web pages are:</p>
<ul class="simple">
<li>Quickstart:
<a class="reference external" href="http://docs.saltstack.com/en/latest/topics/tutorials/quickstart.html">http://docs.saltstack.com/en/latest/topics/tutorials/quickstart.html</a></li>
<li>Salt Bootstrap: <a class="reference external" href="https://github.com/saltstack/salt-bootstrap">https://github.com/saltstack/salt-bootstrap</a></li>
<li>Standalone Minion:
<a class="reference external" href="http://docs.saltstack.com/en/latest/topics/tutorials/standalone_minion.html">http://docs.saltstack.com/en/latest/topics/tutorials/standalone_minion.html</a></li>
<li>Configuring Salt:
<a class="reference external" href="http://docs.saltstack.com/en/latest/ref/configuration/index.html">http://docs.saltstack.com/en/latest/ref/configuration/index.html</a></li>
</ul>
</div>
<div class="section" id="exercises">
<span id="ref-class-lesson-devops-saltstack-exercises"></span><h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="exercise-i">
<h3>Exercise I<a class="headerlink" href="#exercise-i" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>SaltStack.1:</dt>
<dd><ol class="first last arabic simple">
<li>Turn on the type script by <a href="#id1"><span class="problematic" id="id2">``</span></a>script salt_ex1_$USERNAME.txt` (Replace $USERNAME with your id)</li>
<li>Install Python <code class="docutils literal"><span class="pre">virtualenv</span></code> using salt.</li>
<li>Run <code class="docutils literal"><span class="pre">virtualenv</span> <span class="pre">--version</span></code>.</li>
<li>Type <code class="docutils literal"><span class="pre">exit</span></code> to save the script.</li>
<li>Submit <code class="docutils literal"><span class="pre">salt_ex1_$USERNAME.txt</span></code> file.</li>
</ol>
</dd>
</dl>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Gregor von Laszewski.<br/>
    </p>
  </div>
</footer>
  </body>
</html>